{"version":3,"file":"js/792.e8ad4722.js","mappings":"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","sources":["webpack://testmall/./src/components/content/tabControl/TabControl.vue","webpack://testmall/src/components/content/tabControl/TabControl.vue","webpack://testmall/./src/components/content/tabControl/TabControl.vue?4347","webpack://testmall/./src/components/content/tabControl/TabControl.vue?4350","webpack://testmall/./src/views/category/Category.vue","webpack://testmall/./src/views/category/childComps/TabMenu.vue","webpack://testmall/src/views/category/childComps/TabMenu.vue","webpack://testmall/./src/views/category/childComps/TabMenu.vue?9a58","webpack://testmall/./src/views/category/childComps/TabMenu.vue?ba32","webpack://testmall/./src/views/category/childComps/TabContentCategory.vue","webpack://testmall/./src/components/common/gridView/GridView.vue","webpack://testmall/src/components/common/gridView/GridView.vue","webpack://testmall/./src/components/common/gridView/GridView.vue?cd0c","webpack://testmall/./src/components/common/gridView/GridView.vue?1d92","webpack://testmall/src/views/category/childComps/TabContentCategory.vue","webpack://testmall/./src/views/category/childComps/TabContentCategory.vue?4d52","webpack://testmall/./src/views/category/childComps/TabContentCategory.vue?98d2","webpack://testmall/./src/network/category.js","webpack://testmall/src/views/category/Category.vue","webpack://testmall/./src/views/category/Category.vue?995a","webpack://testmall/./src/views/category/Category.vue?12f9"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"tabControl\",staticClass:\"tab-control\"},_vm._l((_vm.titles),function(item,index){return _c('div',{key:index,staticClass:\"tab-control-item\",class:{active:index === _vm.currentIndex},on:{\"click\":function($event){return _vm.changeIndex(index)}}},[_c('span',[_vm._v(\" \"+_vm._s(item)+\" \")])])}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"tab-control\" ref=\"tabControl\">\n    <div class=\"tab-control-item\" v-for=\"(item,index) in titles\" :key=\"index\" @click=\"changeIndex(index)\"\n         :class=\"{active:index === currentIndex}\">\n      <span>\n        {{ item }}\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TabControl\",\n  components: {},\n  props: {\n    titles: {\n      type: Array,\n      default() {\n        return [];\n      }\n    },\n    tabSticky: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      currentIndex: 0,\n    };\n  },\n  mounted() {\n    setInterval(() => {\n      // console.log(this.$refs.tabControl.offsetTop);\n      // console.log(this.tabSticky)\n    }, 1000);\n  },\n  methods: {\n    changeIndex(index) {\n      this.currentIndex = index;\n      this.$emit(\"tabClick\", index);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.tab-control {\n  display: flex;\n  background: white;\n  z-index: 10;\n\n  .tab-control-item {\n    flex: 1;\n    text-align: center;\n    height: 40px;\n    line-height: 40px;\n\n    span {\n      padding: 3px;\n    }\n  }\n\n  .active {\n    color: var(--color-high-text);\n\n    span {\n      border-bottom: 2px solid var(--color-tint);\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TabControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TabControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TabControl.vue?vue&type=template&id=1b2e16ae&scoped=true&\"\nimport script from \"./TabControl.vue?vue&type=script&lang=js&\"\nexport * from \"./TabControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TabControl.vue?vue&type=style&index=0&id=1b2e16ae&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b2e16ae\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"category\"}},[_c('nav-bar',{staticClass:\"nav-bar\"},[_c('div',{attrs:{\"slot\":\"center\"},slot:\"center\"},[_vm._v(\"商品分类\")])]),_c('div',{staticClass:\"content\"},[_c('tab-menu',{attrs:{\"categories\":_vm.categories},on:{\"selectItem\":_vm.selectItem}}),_c('scroll',{ref:\"scroll\",attrs:{\"id\":\"tab-content\",\"data\":[_vm.categoryData]}},[_c('div',[_c('tab-content-category',{attrs:{\"subcategories\":_vm.showSubcategory}}),_c('tab-control',{attrs:{\"titles\":['综合', '新品', '销量']},on:{\"itemClick\":_vm.tabClick}}),_c('goods-list',{attrs:{\"goods\":_vm.showCategoryDetail}})],1)])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('scroll',{attrs:{\"id\":\"tab-menu\"}},[_c('div',{staticClass:\"menu-list\"},_vm._l((_vm.categories),function(item,index){return _c('div',{key:index,staticClass:\"menu-list-item\",class:{active: index===_vm.currentIndex},on:{\"click\":function($event){return _vm.itemClick(index)}}},[_vm._v(\" \"+_vm._s(item.title)+\" \")])}),0)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <scroll id=\"tab-menu\">\n    <div class=\"menu-list\">\n      <div class=\"menu-list-item\"\n           :class=\"{active: index===currentIndex}\"\n           v-for=\"(item, index) in categories\"\n           :key=\"index\"\n           @click=\"itemClick(index)\">\n        {{item.title}}\n      </div>\n    </div>\n  </scroll>\n</template>\n\n<script>\n  import Scroll from 'components/common/scroll/Scroll'\n\n\texport default {\n\t\tname: \"TabMenu\",\n    components: {\n\t\t  Scroll\n    },\n    props: {\n\t\t  categories: Array\n    },\n    data() {\n\t\t  return {\n\t\t    currentIndex: 0\n      }\n    },\n    methods: {\n\t\t  itemClick(index) {\n        this.currentIndex = index\n        this.$emit('selectItem', index)\n      }\n    }\n\t}\n</script>\n\n<style scoped>\n  #tab-menu {\n    background-color: #f6f6f6;\n    height: 100%;\n    width: 100px;\n    box-sizing: border-box;\n  }\n\n  .menu-list-item {\n    height: 45px;\n    line-height: 45px;\n    text-align: center;\n    font-size: 14px;\n  }\n\n  .menu-list-item.active {\n    font-weight: 700;\n    color: var(--color-high-text);\n    background-color: #fff;\n    border-left: 3px solid var(--color-high-text);\n  }\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TabMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TabMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TabMenu.vue?vue&type=template&id=36798b5c&scoped=true&\"\nimport script from \"./TabMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./TabMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TabMenu.vue?vue&type=style&index=0&id=36798b5c&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36798b5c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.subcategories.list)?_c('grid-view',{attrs:{\"cols\":3,\"lineSpace\":15,\"v-margin\":20}},_vm._l((_vm.subcategories.list),function(item,index){return _c('div',{key:index,staticClass:\"item\"},[_c('a',{attrs:{\"href\":item.link}},[_c('img',{staticClass:\"item-img\",attrs:{\"src\":item.image,\"alt\":\"\"}}),_c('div',{staticClass:\"item-text\"},[_vm._v(_vm._s(item.title))])])])}),0):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"gridView\",staticClass:\"grid-view\"},[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"grid-view\" ref=\"gridView\">\n    <slot></slot>\n  </div>\n</template>\n\n<script>\n\texport default {\n\t\tname: \"GridView\",\n    props: {\n\t\t  cols: {\n\t\t    type: Number,\n        default: 2\n      },\n      hMargin: {\n\t\t    type: Number,\n        default: 8\n      },\n      vMargin: {\n\t\t    type: Number,\n        default: 8\n      },\n      itemSpace: {\n\t\t    type: Number,\n        default: 8\n      },\n      lineSpace: {\n\t\t    type: Number,\n        default: 8\n      }\n    },\n    mounted: function () {\n\t\t  setTimeout(this._autoLayout, 20)\n    },\n    updated: function () {\n      this._autoLayout()\n    },\n    methods: {\n\t\t  _autoLayout: function () {\n        // 1.获取gridEl和children\n        // 注: 这里为什么不用document.querySelector呢?\n        // 答: 因为如果在项目中, 多处都用到了grid-view, 那么这里就不确定获取的是哪一个了.\n        let gridEl = this.$refs.gridView;\n        let children = gridEl.children;\n\n        // 2.设置gridEl的内边距\n        gridEl.style.padding = `${this.vMargin}px ${this.hMargin}px`\n\n        // 3.计算item的宽度\n        let itemWidth = (gridEl.clientWidth - 2 * this.hMargin - (this.cols - 1) * this.itemSpace) / this.cols;\n        for (let i = 0; i < children.length; i++) {\n          let item = children[i];\n          item.style.width = itemWidth + 'px';\n          if ((i+1) % this.cols !== 0) {\n            item.style.marginRight = this.itemSpace + 'px'\n          }\n          if (i >= this.cols) {\n            item.style.marginTop = this.lineSpace + 'px'\n          }\n        }\n      }\n    }\n\t}\n</script>\n\n<style scoped>\n  .grid-view {\n    display: flex;\n    flex-wrap: wrap;\n  }\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GridView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GridView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GridView.vue?vue&type=template&id=58a324f6&scoped=true&\"\nimport script from \"./GridView.vue?vue&type=script&lang=js&\"\nexport * from \"./GridView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GridView.vue?vue&type=style&index=0&id=58a324f6&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58a324f6\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <grid-view :cols=\"3\" :lineSpace=\"15\" :v-margin=\"20\" v-if=\"subcategories.list\">\n      <div class=\"item\" v-for=\"(item, index) in subcategories.list\" :key=\"index\">\n        <a :href=\"item.link\">\n          <img class=\"item-img\" :src=\"item.image\" alt=\"\">\n          <div class=\"item-text\">{{item.title}}</div>\n        </a>\n      </div>\n    </grid-view>\n  </div>\n</template>\n\n<script>\n  import GridView from 'components/common/gridView/GridView'\n\n  export default {\n    name: \"TabContentCategory\",\n    components: {\n      GridView\n    },\n    props: {\n      subcategories: {\n        type: Object,\n        default() {\n          return []\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .panel img {\n    width: 100%;\n  }\n\n  .item {\n    text-align: center;\n    font-size: 12px;\n  }\n\n  .item-img {\n    width: 80%;\n  }\n\n  .item-text {\n    margin-top: 15px;\n  }\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TabContentCategory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TabContentCategory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TabContentCategory.vue?vue&type=template&id=05cca9d1&scoped=true&\"\nimport script from \"./TabContentCategory.vue?vue&type=script&lang=js&\"\nexport * from \"./TabContentCategory.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TabContentCategory.vue?vue&type=style&index=0&id=05cca9d1&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"05cca9d1\",\n  null\n  \n)\n\nexport default component.exports","import {request} from './request'\n\n\nexport function getCategory() {\n  return request({\n    url: '/category'\n  })\n}\n\nexport function getSubcategory(maitKey) {\n  return request({\n    url: '/subcategory',\n    params: {\n      maitKey\n    }\n  })\n}\n\nexport function getCategoryDetail(miniWallkey, type) {\n  return request({\n    url: '/subcategory/detail',\n    params: {\n      miniWallkey,\n      type\n    }\n  })\n}\n","<template>\n  <div id=\"category\">\n    <nav-bar class=\"nav-bar\"><div slot=\"center\">商品分类</div></nav-bar>\n    <div class=\"content\">\n      <tab-menu :categories=\"categories\"\n                @selectItem=\"selectItem\"/>\n\n      <scroll id=\"tab-content\"\n              :data=\"[categoryData]\"\n              ref=\"scroll\">\n        <div>\n          <tab-content-category :subcategories=\"showSubcategory\"/>\n          <tab-control :titles=\"['综合', '新品', '销量']\"\n                       @itemClick=\"tabClick\"/>\n          <goods-list :goods=\"showCategoryDetail\"/>\n        </div>\n      </scroll>\n    </div>\n  </div>\n</template>\n\n<script>\n  import NavBar from 'components/common/navbar/NavBar'\n\n  import TabMenu from './childComps/TabMenu'\n  import TabContentCategory from './childComps/TabContentCategory'\n\n\n  import TabControl from 'components/content/tabControl/TabControl'\n  import Scroll from 'components/common/scroll/Scroll'\n  import GoodsList from 'components/content/goods/goodsList'\n\n  import {getCategory, getSubcategory, getCategoryDetail} from \"network/category\";\n  import {POP, SELL, NEW} from \"common/const\";\n  import {tabControlMixin} from \"@/common/mixin\";\n\n  export default {\n\t\tname: \"Category\",\n    components: {\n\t\t  NavBar,\n      TabMenu,\n      TabControl,\n      Scroll,\n      TabContentCategory,\n      GoodsList\n    },\n    mixins: [tabControlMixin],\n    data() {\n\t\t  return {\n\t\t    categories: [],\n        categoryData: {\n        },\n        currentIndex: -1\n      }\n    },\n    created() {\n\t\t  // 1.请求分类数据\n      this._getCategory()\n\n      // 2.监听图片加载完成\n\t    this.$bus.$on('imgLoad', () => {\n\t\t    this.$refs.scroll.refresh()\n\t    })\n    },\n    computed: {\n\t\t  showSubcategory() {\n\t\t    if (this.currentIndex === -1) return {}\n        return this.categoryData[this.currentIndex].subcategories\n      },\n      showCategoryDetail() {\n\t\t    if (this.currentIndex === -1) return []\n\t\t    return this.categoryData[this.currentIndex].categoryDetail[this.currentType]\n      }\n    },\n    methods: {\n\t\t  _getCategory() {\n\t\t    getCategory().then(res => {\n\t\t      // 1.获取分类数据\n\t\t      this.categories = res.data.category.list\n\t\t\t    console.log(res);\n\t\t\t    // 2.初始化每个类别的子数据\n          for (let i = 0; i < this.categories.length; i++) {\n            this.categoryData[i] = {\n              subcategories: {},\n              categoryDetail: {\n                'pop': [],\n                'new': [],\n                'sell': []\n              }\n            }\n          }\n          // 3.请求第一个分类的数据\n          this._getSubcategories(0)\n        })\n      },\n      _getSubcategories(index) {\n        this.currentIndex = index;\n\t\t    const mailKey = this.categories[index].maitKey;\n        getSubcategory(mailKey).then(res => {\n          this.categoryData[index].subcategories = res.data\n          this.categoryData = {...this.categoryData}\n          this._getCategoryDetail(POP)\n          this._getCategoryDetail(SELL)\n          this._getCategoryDetail(NEW)\n        })\n      },\n      _getCategoryDetail(type) {\n\t\t    // 1.获取请求的miniWallkey\n        const miniWallkey = this.categories[this.currentIndex].miniWallkey;\n        // 2.发送请求,传入miniWallkey和type\n\t\t    getCategoryDetail(miniWallkey, type).then(res => {\n\t\t      // 3.将获取的数据保存下来\n\t\t      this.categoryData[this.currentIndex].categoryDetail[type] = res\n          this.categoryData = {...this.categoryData}\n        })\n      },\n      /**\n       * 事件响应相关的方法\n       */\n      selectItem(index) {\n        this._getSubcategories(index)\n      }\n    }\n\t}\n</script>\n\n<style scoped>\n  #category {\n    height: 100vh;\n  }\n\n  .nav-bar {\n    background-color: var(--color-tint);\n    font-weight: 700;\n    color: #fff;\n  }\n\n  .content {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 44px;\n    bottom: 49px;\n\n    display: flex;\n    overflow: hidden;\n  }\n\n  #tab-content {\n    height: 100%;\n    flex: 1;\n    overflow: hidden;\n  }\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Category.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Category.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Category.vue?vue&type=template&id=63831e44&scoped=true&\"\nimport script from \"./Category.vue?vue&type=script&lang=js&\"\nexport * from \"./Category.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Category.vue?vue&type=style&index=0&id=63831e44&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63831e44\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","staticClass","_l","titles","item","index","key","class","active","currentIndex","on","$event","changeIndex","_v","_s","staticRenderFns","name","components","props","type","default","tabSticky","data","mounted","setInterval","methods","component","attrs","slot","categories","selectItem","categoryData","showSubcategory","tabClick","showCategoryDetail","itemClick","title","Scroll","subcategories","list","link","image","_e","_t","cols","hMargin","vMargin","itemSpace","lineSpace","setTimeout","updated","_autoLayout","gridEl","GridView","getCategory","request","url","getSubcategory","maitKey","params","getCategoryDetail","miniWallkey","NavBar","TabMenu","TabControl","TabContentCategory","GoodsList","mixins","created","computed","_getCategory","console","categoryDetail","_getSubcategories","_getCategoryDetail"],"sourceRoot":""}